bucket: "hoops-edge"
region: "us-east-1"
api:
  base_url: "https://api.collegebasketballdata.com"
  timeout_seconds: 15
  max_concurrency: 3
  rate_limit_per_sec: 3
  log_every_requests: 100
  games_chunk_days: 30
  lines_chunk_days: 30
  retry:
    max_attempts: 5
    base_delay_seconds: 0.5
    max_delay_seconds: 8
  rolling_window_days: 7

seasons:
  start: 2010
  end: 2026
  window_start_month: 8
  window_start_day: 1
  window_end_month: 7
  window_end_day: 31

endpoints:
  conferences:
    path: "/conferences"
    type: "snapshot"
  conferences_history:
    path: "/conferences/history"
    type: "snapshot"
  draft_picks:
    path: "/draft/picks"
    type: "season"
    season_param: "season"
  draft_positions:
    path: "/draft/positions"
    type: "snapshot"
  draft_teams:
    path: "/draft/teams"
    type: "snapshot"
  games:
    path: "/games"
    type: "season"
    season_param: "season"
    start_date_param: "startDateRange"
    end_date_param: "endDateRange"
  games_media:
    path: "/games/media"
    type: "season"
    season_param: "season"
    start_date_param: "startDateRange"
    end_date_param: "endDateRange"
  games_players:
    path: "/games/players"
    type: "season"
    season_param: "season"
    start_date_param: "startDateRange"
    end_date_param: "endDateRange"
  games_teams:
    path: "/games/teams"
    type: "season"
    season_param: "season"
    start_date_param: "startDateRange"
    end_date_param: "endDateRange"
  lines:
    path: "/lines"
    type: "season"
    season_param: "season"
    start_date_param: "startDateRange"
    end_date_param: "endDateRange"
  lines_providers:
    path: "/lines/providers"
    type: "snapshot"
  lineups_game:
    path: "/lineups/game/{gameId}"
    type: "game_fanout"
    required_params: ["gameId"]
  lineups_team:
    path: "/lineups/team"
    type: "season"
    season_param: "season"
    required_params: ["season", "team"]
  plays_types:
    path: "/plays/types"
    type: "snapshot"
  plays_game:
    path: "/plays/game/{gameId}"
    type: "game_fanout"
    required_params: ["gameId"]
  plays_date:
    path: "/plays/date"
    type: "date"
    date_param: "date"
    required_params: ["date"]
  plays_player:
    path: "/plays/player/{playerId}"
    type: "player_fanout"
    required_params: ["playerId", "season"]
  plays_team:
    path: "/plays/team"
    type: "season"
    season_param: "season"
    required_params: ["season", "team"]
  plays_tournament:
    path: "/plays/tournament"
    type: "season"
    season_param: "season"
    required_params: ["season", "tournament"]
  substitutions_game:
    path: "/substitutions/game/{gameId}"
    type: "game_fanout"
    required_params: ["gameId"]
  substitutions_player:
    path: "/substitutions/player/{playerId}"
    type: "player_fanout"
    required_params: ["playerId", "season"]
  substitutions_team:
    path: "/substitutions/team"
    type: "season"
    season_param: "season"
    required_params: ["season", "team"]
  rankings:
    path: "/rankings"
    type: "season"
    season_param: "season"
  ratings_adjusted:
    path: "/ratings/adjusted"
    type: "snapshot"
  ratings_srs:
    path: "/ratings/srs"
    type: "snapshot"
  recruiting_players:
    path: "/recruiting/players"
    type: "season"
    season_param: "season"
  stats_player_shooting_season:
    path: "/stats/player/shooting/season"
    type: "season"
    season_param: "season"
    required_params: ["season"]
    required_any: [["team", "conference"]]
  stats_player_season:
    path: "/stats/player/season"
    type: "season"
    season_param: "season"
    required_params: ["season"]
  stats_team_shooting_season:
    path: "/stats/team/shooting/season"
    type: "season"
    season_param: "season"
    required_params: ["season"]
    required_any: [["team", "conference"]]
  stats_team_season:
    path: "/stats/team/season"
    type: "season"
    season_param: "season"
    required_params: ["season"]
  teams:
    path: "/teams"
    type: "snapshot"
  teams_roster:
    path: "/teams/roster"
    type: "season"
    season_param: "season"
    required_params: ["season"]
  venues:
    path: "/venues"
    type: "snapshot"

s3_layout:
  raw_prefix: "raw"
  bronze_prefix: "bronze"
  silver_prefix: "silver"
  gold_prefix: "gold"
  ref_prefix: "ref"
  meta_prefix: "meta"
  deadletter_prefix: "deadletter"
  tmp_prefix: "tmp"
  athena_prefix: "athena"

# Validation controls
validate:
  strict_schema: false

# Gold layer settings
gold:
  glue_database: "cbbd_gold"
  tables:
    - team_power_rankings
    - game_predictions_features
    - player_season_impact
    - market_lines_analysis
    - team_season_summary

# Gap-fill settings
gap_fill:
  athena_database: "cbbd_silver"
  athena_workgroup: "cbbd"
  athena_output: "s3://hoops-edge/athena/"
  max_concurrency: 5
  resume_dir: ".gap_fill_resume"

# Optional: skip problematic endpoints by name
skip_endpoints: []
